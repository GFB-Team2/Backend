당근 마켓 클론 코딩 - FastAPI API 명세서 (v1)
FastAPI를 기반으로 하며, 모든 요청은 JSON 포맷을 사용하고 인증이 필요한 엔드포인트는 JWT(Access Token)를 사용합니다.
1. 인증 및 사용자 계정 관리 (Authentication & Users)
모든 계정 관련 기능은 로컬 이메일/비밀번호 기반 인증을 사용하며, 성공 시 Access Token을 발급합니다.
1.1. 회원가입
속성
값
Endpoint
POST /api/v1/auth/signup
설명
신규 사용자 계정을 등록합니다.
요청 Body (Input)
{"email": "string", "password": "string", "name": "string", "nickname": "string"}
응답 Body (Output)
{"user_id": "string", "email": "string", "nickname": "string"}
상태 코드
201 Created (성공), 400 Bad Request (이메일 중복 등)

1.2. 로그인 (토큰 발급)
속성
값
Endpoint
POST /api/v1/auth/login
설명
사용자 인증 후 Access Token을 발급합니다.
요청 Body (Input)
{"email": "string", "password": "string"}
응답 Body (Output)
{"access_token": "string", "token_type": "bearer"}
상태 코드
200 OK (성공), 401 Unauthorized (인증 실패)

1.3. 현재 사용자 정보 조회
속성
값
Endpoint
GET /api/v1/users/me
설명
발급된 Access Token을 사용하여 현재 로그인된 사용자 정보를 조회합니다.
인증
필수 (Authorization: Bearer <Token>)
응답 Body (Output)
{"user_id": "string", "email": "string", "nickname": "string", "name": "string", "manner_temperature": 36.5, "region_name": "당근동"}
상태 코드
200 OK (성공), 401 Unauthorized (토큰 만료/오류)

2. 상품 및 게시글 관리 (Items/Posts)
지역 기반 중고거래의 핵심 기능입니다.
2.1. 상품 게시글 등록
속성
값
Endpoint
POST /api/v1/items
설명
새로운 중고 상품 게시글을 등록합니다.
인증
필수 (Authorization: Bearer <Token>)
요청 Body (Input)
{"title": "string", "content": "string", "price": 10000, "category": "디지털기기", "image_urls": ["string", ...], "region_id": "string"}
응답 Body (Output)
{"item_id": "string", "title": "string", "created_at": "datetime"}

2.2. 상품 목록 조회 (홈페이지)
속성
값
Endpoint
GET /api/v1/items
설명
필터링 및 페이지네이션을 적용하여 상품 목록을 조회합니다.
Query Parameters
region_id (필수, 사용자 인증 지역), category (선택), page (페이지 번호), limit (개수)
응답 Body (Output)
{"items": [{"item_id": "string", "title": "string", "price": 10000, "region_name": "당근동", "created_at": "datetime", "is_sold": false, "main_image_url": "string"}, ...], "total_count": 100}

2.3. 상품 상세 페이지 조회
속성
값
Endpoint
GET /api/v1/items/{item_id}
설명
특정 상품의 상세 정보를 조회합니다. (조회수 증가 로직 포함)
응답 Body (Output)
{"item_id": "string", "title": "string", "content": "string", "price": 10000, "seller": {"user_id": "string", "nickname": "string", "manner_temperature": 36.5}, "region_name": "당근동", "created_at": "datetime", "views": 100, "image_urls": ["string", ...]}

2.4. 상품 상태 업데이트
속성
값
Endpoint
PATCH /api/v1/items/{item_id}/status
설명
상품의 상태(판매 중/예약 중/거래 완료)를 변경합니다.
인증
필수 (상품 작성자만 가능)
요청 Body (Input)
{"status": "SOLD" or "RESERVED" or "SELLING"}
상태 코드
200 OK

3. 매너 온도 및 평가 관리 (Manner Temperature)
사용자의 신뢰도를 나타내는 매너 온도를 관리합니다.
3.1. 매너 평가 등록
속성
값
Endpoint
POST /api/v1/users/{target_user_id}/review
설명
거래 완료 후 상대방 사용자에게 매너 평가를 등록하여 매너 온도를 업데이트합니다.
인증
필수 (Authorization: Bearer <Token>)
요청 Body (Input)
{"item_id": "string", "is_positive": true, "evaluation_points": ["시간을 잘 지켜요", "친절해요"]}
응답 Body (Output)
{"review_id": "string", "target_user_id": "string", "new_temperature": 37.1}
참고
백엔드에서 is_positive와 evaluation_points를 기반으로 점수 및 온도를 계산하여 업데이트합니다.

3.2. 특정 사용자의 매너 온도 조회
속성
값
Endpoint
GET /api/v1/users/{user_id}/manner
설명
특정 사용자의 매너 온도와 받은 평가 항목을 조회합니다.
응답 Body (Output)
{"manner_temperature": 36.5, "positive_reviews": {"친절해요": 15, "응답이 빨라요": 10}}

4. 백엔드 데이터 모델 (DB Schema 핵심 요소)
요청하신 기능을 구현하기 위해 백엔드 DB에 저장되어야 할 핵심 필드입니다.
User (사용자)
필드명
타입
설명
user_id
UUID
고유 식별자
email
String
로그인 ID
password_hash
String
암호화된 비밀번호
nickname
String
사용자 닉네임
name
String
사용자 이름
manner_temperature
Float
매너 온도 점수 (기본 36.5)
region_id
String
인증된 지역 ID (지역별 서비스의 핵심)
access_token
String
JWT 토큰 (로그인 시 발급)

Item (상품 게시글)
필드명
타입
설명
item_id
UUID
고유 식별자
seller_id
UUID
작성자 (User.user_id)
title
String
게시글 제목
content
Text
상품 설명
price
Integer
상품 가격
category
String
상품 카테고리 (예: '디지털기기', '의류')
status
Enum
판매 상태 ('SELLING', 'RESERVED', 'SOLD')
region_id
String
게시글이 등록된 지역 ID
image_urls
List[String]
이미지 파일 경로 리스트 (S3 등의 URL)
views
Integer
조회수
created_at
DateTime
게시 시간

